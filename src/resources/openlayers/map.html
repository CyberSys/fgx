<!-- author: yves sablonier, zurich -->
<!-- Â© 2011, GPLv2 and later -->

<html>
<head>
<link rel="stylesheet" href="theme/default/style.css" type="text/css" />
<!-- <link rel="stylesheet" href="style.css" type="text/css" />-->

<!-- for later improvement: add yahoo api -->
<!-- <script src="http://api.maps.yahoo.com/ajaxymap?v=3.0&appid=euzuro-openlayers"></script> -->

<!-- this is our main api -->

<script src="OpenLayers.js"></script>



<style type="text/css">

	/* Style for openlayers fullscreen map */
	body {
		margin: 0;
	}
	#map {
		width: 100%;
		height: 100%;
	}

</style>
	
<script type="text/javascript">

var lon = 0.0;
var lat = 0.0;
var zoom = 4;


var map;
var layer;
var osmprojection;
var vectorLayer;

var layer_style = OpenLayers.Util.extend({}, OpenLayers.Feature.Vector.style['default']);

// opacity
layer_style.strokeOpacity = 0.8;
layer_style.fillOpacity = 0.5;

var pointDefaultStyle = OpenLayers.Util.extend({}, layer_style);
pointDefaultStyle.strokeColor = "red";
pointDefaultStyle.fillColor = "red";
pointDefaultStyle.graphicName = "star";
pointDefaultStyle.pointRadius = 10;
pointDefaultStyle.strokeWidth = 1;
pointDefaultStyle.rotation = 45;
pointDefaultStyle.strokeLinecap = "butt";

function init(){

	map = new OpenLayers.Map('map');
	// alert("init");
	// add OpenStreetMap layer
	layer = new OpenLayers.Layer.OSM( "OSM Map");
	map.addLayer(layer);

	// set osm projection
	osmprojection = new OpenLayers.Projection("EPSG:4326");

	//map.addLayer(layer);
	map.setCenter(

		new OpenLayers.LonLat(lon, lat).transform(
			osmprojection,
			map.getProjectionObject()
			), zoom
	);

	//setting vector layer style


	// adding point default style



	// adding a vector layer with osm projection
	vectorLayer = new OpenLayers.Layer.Vector("Glyphs", osmprojection);

	// drawing a point
	//var point = new OpenLayers.Geometry.Point(5,40).transform(osmprojection,map.getProjectionObject());
	//var feature = new OpenLayers.Feature.Vector(point,null, pointDefaultStyle);
	/*
	var points = new Array(
			new OpenLayers.Geometry.Point(rwyLon1, rwyLat1),
			new OpenLayers.Geometry.Point(rwyLon2, rwyLat2)
			);

	*/
	// add a runway
	/*
	var points = new Array(
			new OpenLayers.Geometry.Point(rwyLon1, rwyLat1),
			new OpenLayers.Geometry.Point(rwyLon2, rwyLat2)
			);
			
	var line = new OpenLayers.Geometry.LineString(points).transform(osmprojection,map.getProjectionObject());
	var runwayFeature = new OpenLayers.Feature.Vector(line,null, pointDefaultStyle);

	// add point to vector layer and to map
	vectorLayer.addFeatures(feature);
	vectorLayer.addFeatures(runwayFeature);
	map.addLayer(vectorLayer);
	*/
	map.addLayer(vectorLayer);
	//alert("init done");

}
function add_runway(lat1, lon1, lat2, lon2){
	

	var points = new Array(
		new OpenLayers.Geometry.Point(lon1, lat1),
		new OpenLayers.Geometry.Point(lon2, lat2)
	);
	var line = new OpenLayers.Geometry.LineString(points).transform(osmprojection,map.getProjectionObject());
	var runwayFeature = new OpenLayers.Feature.Vector(line,null, pointDefaultStyle);
	vectorLayer.addFeatures(runwayFeature);

	map.setCenter(

		new OpenLayers.LonLat(lon1, lat1).transform(
			osmprojection,
			map.getProjectionObject()
			), 14
	);

	//alert("add_runway");
}
</script>


</head>
<body onload="init()">
	<div id="map"></div>
</body>

</html>
