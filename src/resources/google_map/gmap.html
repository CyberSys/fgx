<html>

<head>
<style>
body{
padding: 0px;
margin: 0px;
}

</style>


<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>


<script type="text/javascript">



var icons = {};
icons.red 		= 'map/m_red.png';
icons.yellow 	= 'map/m_yellow.png';
icons.green 	= 'map/m_green.png';
icons.purple 	= 'map/m_purple.png';
icons.orange 	= 'map/m_orange.png';
icons.blue 		= 'map/m_blue.png';

var init_flag = false;
var mapDiv = "";
var map;

var markers = {};
var bounds = {};
var runways = {};

var idx = 0;
var z = 10000;


//==================================================================
//= Add Airport
function add_airport (apt){
	runways[apt] = {};
	bounds[apt] = new google.maps.LatLngBounds();
	Qt.map_debug("add_aiport() " + apt);
}

//==================================================================
//= Show Airport
function show_airport(apt){
	map.fitBounds(bounds[apt]);
	Qt.map_debug("show_airport()" + apt);
}

//==================================================================
//== Add Runway
function add_runway(apt, rwy1, lat1, lng1, rwy2, lat2, lng2){

	var latLng1 = new google.maps.LatLng(lat1, lng1);
	var latLng2 = new google.maps.LatLng(lat2, lng2);
	var coordinates = [ latLng1, latLng2 ];


	runways[apt] = new google.maps.Polyline({
		path: coordinates,
		strokeColor: "#990000",
		strokeOpacity: 1.0,
		strokeWeight: 4
	});
	runways[apt].setMap(map);
	
	bounds[apt].extend(latLng1);
	bounds[apt].extend(latLng2);

	Qt.map_debug("add_runwayXX()" + apt + " " + rwy1 + "-" + rwy2);
	
	Qt.map_debug("add_runway()" + apt + " " + rwy1 + "-" + rwy2);
}



//*************************************************
//** Initialize Map
//*************************************************
function initialize_map(){

	mapDiv = document.getElementById("map_canvas");
	var latlng = new google.maps.LatLng(0.0, -0.0);
	var mapOptions = {
		zoom: 12,
		center: latlng,
		mapTypeId: google.maps.MapTypeId.HYBRID,
		mapTypeControl: false,
		scaleControl: true,
		disableDefaultUI: true
	};

	map = new google.maps.Map(mapDiv, mapOptions);

	//* MouseMove
	google.maps.event.addListener(map, 'mousemove', function(ev){
		if(Qt){
			Qt.map_mouse_move(ev.latLng.lat(), ev.latLng.lng());
		}
	});
	//* Click
	google.maps.event.addListener(map, 'click', function(ev){
		if(Qt){
			Qt.map_click(ev.latLng.lat(), ev.latLng.lng());
		}
	});

	//* RightClick
	google.maps.event.addListener(map, 'rightclick', function(ev){
		if(Qt){
			Qt.map_right_click(ev.latLng.lat(), ev.latLng.lng());
		}
	});

	//* Zoom Changed
	google.maps.event.addListener(map, 'zoom_changed', function(ev){
		if(Qt){
			Qt.map_zoom_changed(map.getZoom());
		}
	});

	//* Click Add Marker
	google.maps.event.addListener(map, 'dblclick', function(event){
		placeMarker(event.latLng);
	});
	init_flag = true;
	if(Qt){
		Qt.set_map_init();	
	}
}

//*************************************************
//** Map Settings
//*************************************************

//## set_zoom
function set_zoom(zoom_level){
	map.setZoom(zoom_level);
}

//## Zoom to
function zoom_to  (lat, lng, zoom_level){
	var latlng = new google.maps.LatLng(lat, lng);
	map.panTo(latlng);
	map.setZoom(zoom_level);
}

</script>



</head>

<body onload="initialize_map()">
	<div id="map_canvas" style="width:100%; height:100%;"></div>
</body>

</html>
